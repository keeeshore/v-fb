webpackJsonp([0],{0:function(t,e,o){t.exports=o(1)},1:function(t,e,o){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(3),s=o(5),r=o(40);t&&s.enableProdMode(),n.platformBrowserDynamic().bootstrapModule(r.AdminModule)}).call(e,o(2))},40:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(e,"__esModule",{value:!0});var s=o(5),r=o(41),i=o(39),l=o(63),a=o(64),c=o(67),d=o(75),u=o(77),p=o(80),h=o(87),f=o(499),m=o(502),g=o(505),v=o(82),b=o(81),P=o(507),E=[{path:"",component:P.AdminComponent,canActivate:[v.AuthGuard],children:[{path:"",canActivateChild:[v.AuthGuard],children:[{path:"events",component:h.Events},{path:"albums",component:f.Albums},{path:"posts",component:m.Posts},{path:"photos/:albumId",component:g.Photos,data:{albumId:"albumId"}},{path:"logout",component:p.Login},{path:"",component:p.Login},{path:"**",component:p.Login}]}]}],T=function(){function AdminModule(){}return AdminModule}();T=n([s.NgModule({imports:[i.BrowserModule,l.HttpModule,l.JsonpModule,a.FormsModule,i.BrowserModule,u.BrowserAnimationsModule,r.RouterModule.forRoot(E)],declarations:[c.AdminController,P.AdminComponent,d.AdminHeader,h.Events,f.Albums,g.Photos,m.Posts,p.Login],exports:[r.RouterModule],bootstrap:[c.AdminController],providers:[b.ApiService,v.AuthGuard]})],T),e.AdminModule=T},67:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(38),l=o(41);o(68);var a=function(){function AdminController(t,e,o){this.router=t,this.route=e,this.location=o,console.log("< admin-app > Component called...")}return AdminController.prototype.ngOnInit=function(){console.log("Admin Controller::::"),this.router.queryParams.subscribe(function(t){console.log("ngOnInit::val------------------:",t),isNaN(t.id)||console.log("ngOnInit::val------------------:Valid param id",t)})},AdminController}();a=n([r.Component({selector:"app-admin",template:o(73),styles:[o(74)]}),s("design:paramtypes",[l.ActivatedRoute,l.Router,i.Location])],a),e.AdminController=a},73:function(t,e){t.exports='<!-- <div class="container">\r\n\t<admin-header></admin-header>\r\n</div>\r\n<router-outlet></router-outlet> -->\r\n<div class="container">\r\n\t<admin-header></admin-header>\r\n\t<admin-component></admin-component>\r\n</div>\r\n'},74:function(t,e){t.exports="#main {}\r\n"},75:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(e,"__esModule",{value:!0});var s=o(5),r=function(){function AdminHeader(){}return AdminHeader}();r=n([s.Component({selector:"admin-header",template:o(76)})],r),e.AdminHeader=r},76:function(t,e){t.exports='<header>\r\n\t<div class="row">\r\n\t\t<div class="col-sm-12">\r\n\t\t\t<ul class="list-inline" style="border-bottom: 1px solid #CCC; padding: 10px 5px; margin-bottom: 20px;">\r\n                <li>\r\n                    <!--<a routerLink="/school" routerLinkActive="active">School</a>-->\r\n                   <!--  <a [routerLink]="[\'/events\']">Events</a> -->\r\n                    <a routerLink="/events" routerLinkActive="active">Events</a>\r\n                </li>\r\n\t\t\t\t<li>\r\n                    <!-- <a [routerLink]="[\'/posts\']">Posts</a> -->\r\n                    <a routerLink="/posts" routerLinkActive="active">Posts</a>\r\n                </li>\r\n                <li>\r\n                    <a [routerLink]="[\'/albums\']">Albums</a>\r\n                </li>\r\n                 <li style="float: right;">\r\n                    <a [routerLink]="[\'/\']">Log out</a>\r\n                </li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</header>\r\n'},80:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(81),l=o(82),a=o(83),c=o(41),d=function(){function Login(t,e,o){this.apiService=t,this.authGaurd=e,this.router=o,this.hostApi=a.ENV.HOST_API_URL,this._REASON="Session Expired. Please login again.",this.reason="",console.log("Photos component init::AuthGuard",e)}return Login.prototype.ngOnInit=function(){var t=this;console.log("production"," ::: ENV VARS::",a.ENV,":::authGaurd:::",this.authGaurd),this.authGaurd.doLogout(),this.reason="",this.router.params.forEach(function(e){e.reason&&(t.reason=t._REASON)})},Login.prototype.onLoginClick=function(){console.log("onLoginClick");var t=new u(this.userName,this.password);this.authGaurd.doLogin(t)},Login}();d=n([r.Component({selector:"app-login",template:o(86),providers:[i.ApiService]}),s("design:paramtypes",[i.ApiService,l.AuthGuard,c.ActivatedRoute])],d),e.Login=d;var u=({ENV:"production"}.API_URL,function(){function LoginModel(t,e){console.log("Login component init"),this.userName=t,this.password=e}return LoginModel}());e.LoginModel=u},82:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(41),l=o(81),a=o(83),c=function(){function AuthGuard(t,e){this.apiService=t,this.router=e,this.isLoggedIn=!1,console.log("AuthGuard#-----------------------------#constructor:this.isLoggedIn ,",this.isLoggedIn),this.apiService=t,console.log("AuthGaurd::",t)}return AuthGuard.prototype.canActivate=function(t,e){return console.log("AuthGuard#canActivate called for state.url",e.url," isLoggedIn:",this.isLoggedIn),"/login"===e.url||"/"===e.url||"/admin"===e.url||this.isLoggedIn},AuthGuard.prototype.canActivateChild=function(t,e){return console.log("AuthGuard#canActivateChild called:this.isLoggedIn ,",this.isLoggedIn),console.log("AuthGuard#canActivateChild called:this.apiService.isLoggedIn",this.apiService.isLoggedIn),"/login"===e.url||"/"===e.url||this.isLoggedIn},AuthGuard.prototype.doLogin=function(t){var e=this,o=a.ENV.HOST_API_URL+"/authorize.php";this.apiService.post(o,t).subscribe(function(t){console.log("checkLoggedInsTate: response"),t.success?(console.log("checkLoggedInsTate: this.isLoggedIn: before",e.isLoggedIn),e.isLoggedIn=!0,console.log("checkLoggedInsTate: this.isLoggedIn: after",e.isLoggedIn),e.router.navigate(["/events"])):e.isLoggedIn=!1},function(t){console.log("err response:",t),e.isLoggedIn=!1})},AuthGuard.prototype.doLogout=function(){this.isLoggedIn=!1},AuthGuard}();c=n([r.Injectable(),s("design:paramtypes",[l.ApiService,i.Router])],c),e.AuthGuard=c},86:function(t,e){t.exports='<div class="container">\r\n    <div class="row">\r\n        <h3>Login</h3>\r\n        <p class="bg-danger">{{reason}}</p>\r\n        <form class="col-sm-12 form-horizontal" action="{{hostApi}}/authorize.php" method="post">\r\n            <div class="row">\r\n                <div class="form-group">\r\n                    <label class="col-sm-2 control-label">User name</label>\r\n                    <div class="col-sm-5">\r\n                        <input type="text" class="form-control" id="userName" [(ngModel)]="userName" name="userName">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            \r\n            <div class="row">\r\n                <div class="form-group">\r\n                    <label class="col-sm-2 control-label">Password</label>\r\n                    <div class="col-sm-5">\r\n                        <input type="text" class="form-control" id="password" [(ngModel)]="password" name="password">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-sm-2"></div>\r\n                <div class="col-sm-10">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Login" (click)="onLoginClick()">\r\n                </div>\r\n\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>'},87:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(63),l=o(81),a=o(88),c=o(210),d=o(89),u=o(211),p=o(83),h=function(){function Events(t){this.apiService=t,this.message="",this.eventsCollection=new a.EventsCollection,this.fbCollection=new a.EventsCollection,this.fromDate="NONE",this.toDate=d().format(p.ENV.DATE_TIME_FORMAT),this.accessToken="",this.dialogSubject=new u.Subject,console.log("Events component init"),this.getEventsFromTable()}return Events.prototype.setEvents=function(t,e){console.log("setEvents:::-------------------------------------------------------------------------------------");var o=e.map(function(e){e.endTime=e.end_time||e.endTime,e.startTime=e.start_time||e.startTime,delete e.end_time,delete e.start_time;var o=new a.EventModel(e);return console.log(t.events.length,":setEvents:::-----------------------------------------------------NEW eventModel->",o),t.events.push(o),o});return o.length>0},Events.prototype.onGetEventClick=function(){var t=this,e=new Array;this.eventParams=new a.EventParams,this.getEvents(this.eventParams,e).subscribe(function(e){console.log("getEvents success::::::::::::::::::::::::::::::::::::::::::::::::::::",e),t.setEvents(t.fbCollection,e.data)},function(t){console.log("getEvents err:::",t)},function(){console.log("getEvents final:::")})},Events.prototype.getEvents=function(t,e){var o=this;if(console.log("getEvents....called with eventParams:",t),this.message="In progress...",!this.isValidDateRange(this.fromDate,this.toDate))return console.log("Invalid Date range!!!!"),void(this.message="Invalid Date range......");console.log("is valid date range",this.fromDate+" : to : "+this.toDate);var n=d(this.fromDate,p.ENV.DATE_TIME_FORMAT).unix(),s=d(this.toDate,p.ENV.DATE_TIME_FORMAT).unix(),r=p.ENV.FB_GRAPH_URL+p.ENV.FB_PROFILE_ID+"/events",l=new i.URLSearchParams;return l.append("access_token",this.accessToken),l.append("since",n.toString()),l.append("until",s.toString()),l.append("fields",t.fields),l.append("limit",t.limit),l.append("pretty",t.pretty),""!==t.after&&(console.log("after is present...ADDING after"),l.append("after",t.after)),r=r+"?"+l.toString(),console.log("url->",r),this.apiService.fetch(r).subscribe(function(t){if(console.log("getEvents RESPONSE ->",t),t.data&&t.data.length>0){var n=new c.PagingData(t.paging);if(t.data.filter(function(t){e.push(t)}),""!==n.cursors.after)return console.log("pagingData.cursor.after PRESENT"),o.eventParams.after=n.cursors.after,o.getEvents(o.eventParams,e);o.eventParams.after="",console.log("---------------------------------------------------- NOT PRESENT--------ALL DONE!!"),o.dialogSubject.next({data:e})}else o.message="Complete!",console.log("-------------------------------------------ALL DONE!!"),o.dialogSubject.next({data:e})},function(t){o.message=JSON.stringify(t)}),this.dialogSubject},Events.prototype.onSubmitEvents1=function(){console.log("SUBMIT onSubmitEvents1...",this.fbCollection),this.submitEvents(this.fbCollection)},Events.prototype.submitEvents=function(t){var e=this;console.log("SUBMIT eventsCollection...",t);var o=p.ENV.HOST_API_URL+"/events_post.php";this.apiService.post(o,t).subscribe(function(t){console.log("eventModel POST response recieved....",t),t&&t.success&&(e.fbCollection=new a.EventsCollection,e.getEventsFromTable())})},Events.prototype.addEventModel=function(t){var e=new a.EventsCollection;e.events.push(t),console.log("SUBMIT addEventModel...",e),this.submitEvents(e)},Events.prototype.onDeleteEvent=function(t){var e=this,o=p.ENV.HOST_API_URL+"/events_delete.php";console.log("DELETE eventModel...",t),this.apiService.post(o,t).subscribe(function(t){console.log("eventModel DELETE:POST response recieved....",t),t&&t.success?console.log("Deleted successfully...."):console.log("Delete UNSUCCESSFUL"),e.getEventsFromTable()})},Events.prototype.onUpdateEvent=function(t){p.ENV.HOST_API_URL+"/events_update.php";console.log("UPDATE eventModel...",t)},Events.prototype.getEventsFromTable=function(){var t=this;console.log("getEventsFromTable...");var e=p.ENV.HOST_API_URL+"/events_get.php";return this.eventsCollection.events=new Array,this.apiService.fetch(e).subscribe(function(e){console.log("getEventsFromTable response ->",e);t.setEvents(t.eventsCollection,e.events);t.setLastEndTime()},function(e){console.log("getEventsFromTable ERR ->",e),t.message=JSON.stringify(e)})},Events.prototype.setLastEndTime=function(){var t=this.eventsCollection.events.length;if(console.log("setLastEndTime",t),t>0){var e=this.eventsCollection.events[0];this.fromDate=e.endTime}},Events.prototype.isValidDateRange=function(t,e){return!!(d(this.fromDate,p.ENV.DATE_TIME_FORMAT).isValid()&&d(this.toDate,p.ENV.DATE_TIME_FORMAT).isValid()&&d(this.fromDate,p.ENV.DATE_TIME_FORMAT).isBefore(d(this.toDate,p.ENV.DATE_TIME_FORMAT)))&&(console.log("IS VALID DATE RANGE:",this.fromDate+" : to : "+this.toDate),!0)},Events}();h=n([r.Component({selector:"app-events",template:o(498),providers:[l.ApiService]}),s("design:paramtypes",[l.ApiService])],h),e.Events=h},210:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function Cursors(t,e){this.before=t||"",this.after=e||""}return Cursors}();e.Cursors=o;var n=function(){function PagingData(t){this.next=t.next||"none",this.previous=t.previous||"none",t.cursors?this.cursors=t.cursors:this.cursors=new o("","")}return PagingData}();e.PagingData=n},498:function(t,e){t.exports='<section class="container">\r\n    <div class="row">\r\n        <form class="form-horizontal">\r\n            <div class="form-group">\r\n               <label class="col-sm-2 control-label">Access token</label>\r\n                <div class="col-sm-10">\r\n                    <input type="text" class="form-control" id="accessToken" [(ngModel)]="accessToken" name="accessToken">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n               <label class="col-sm-2 control-label">From</label>\r\n                <div class="col-sm-2">\r\n                    <input type="text" class="form-control" id="fromDate" [(ngModel)]="fromDate" name="fromDate">\r\n                </div>\r\n                <label class="col-sm-1 control-label">To</label>\r\n                <div class="col-sm-2">\r\n                    <input type="text" class="form-control" id="toDate" [(ngModel)]="toDate" name="toDate">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="col-sm-12">\r\n                    <input type="button" class="btn btn-xs btn-success" value="Get Events from Facebook" (click)="onGetEventClick()">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Add Events to DB" (click)="onSubmitEvents1()">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Get Events from DB" (click)="getEventsFromTable()">\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <div class="row">\r\n        <h2 class="text-danger">{{message}}</h2>\r\n    </div>\r\n\r\n    <div class="row">\r\n        <h4 class="text-danger">Events from Facebook</h4>\r\n    </div>\r\n    <div class="row">\r\n        <table class="table table-responsive table-striped">\r\n            <thead>\r\n            <tr>\r\n                <th class="col-sm-2">Start Time <br/> End Time</th>\r\n                <th>Name</th>\r\n                <th class="col-sm-2">URL : {{fbCollection.events.length}}</th>\r\n                <th class="col-sm-2">Actions</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody >\r\n            <tr *ngFor="let eventModel of fbCollection.events;">\r\n                <td>{{eventModel.startTime}} <br/> {{eventModel.endTime}}</td>\r\n                <td>{{eventModel.name}}</td>\r\n                <td><img class="img img-responsive" src="{{eventModel.cover.source}}"></td>\r\n                <td class="text-center">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Add" (click)="addEventModel(eventModel)">\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n\r\n    <div class="row">\r\n        <h4 class="text-danger">Events from Table</h4>\r\n    </div>\r\n    <div class="row">\r\n        <table class="table table-responsive table-striped">\r\n            <thead>\r\n            <tr>\r\n                <th class="col-sm-2">Start Time <br/> End Time</th>\r\n                <th>Name</th>\r\n                <th class="col-sm-2">URL : {{eventsCollection.events.length}}</th>\r\n                <th class="col-sm-2">Actions</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody >\r\n            <tr *ngFor="let eventModel of eventsCollection.events;">\r\n                <td>{{eventModel.startTime}} <br/> {{eventModel.endTime}}</td>\r\n                <td>\r\n                    <h4>{{eventModel.name}}</h4>\r\n                    <h4>{{eventModel.name}}</h4>\r\n                </td>\r\n                <td><img class="img img-responsive" src="{{eventModel.cover.source}}"></td>\r\n                <td class="text-center">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Update" (click)="onUpdateEvent(eventModel)">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Delete" (click)="onDeleteEvent(eventModel)">\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n</section>\r\n'},499:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(81),l=o(500),a=function(){function Albums(t){this.apiService=t,this.albumCollection=new l.AlbumCollection,console.log("Albums component init")}return Albums}();a=n([r.Component({selector:"app-albums",template:o(501),providers:[i.ApiService]}),s("design:paramtypes",[i.ApiService])],a),e.Albums=a},501:function(t,e){t.exports='<section class="container">\r\n    <div class="row">\r\n        <h3>Albums</h3>\r\n\r\n        Total: {{albumCollection.albums.length}}\r\n        <ul class="list-inline album-container">\r\n            <li *ngFor="let albumModel of albumCollection.albums;">\r\n                <!-- href="admin/photos/{{albumModel.id}}" -->\r\n                <a [routerLink]="[\'/photos\', albumModel.id]" >\r\n                    <h4>{{albumModel.name}}</h4>\r\n                    <div class="name">#{{albumModel.id}}</div>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n\r\n    </div>\r\n</section>'},502:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(63),l=o(81),a=o(503),c=o(210),d=o(89),u=o(211),p=o(83),h=function(){function Posts(t){this.apiService=t,this.message="",this.postCollection=new a.PostCollection,this.fbCollection=new a.PostCollection,this.fromDate="NONE",this.toDate=d().format(p.ENV.DATE_TIME_FORMAT),this.accessToken="",this.dialogSubject=new u.Subject,console.log("Post component init"),this.getPostsFromTable()}return Posts.prototype.setPosts=function(t,e){console.log("setPosts::-------------------------------------------------------------------------------------");var o=e.map(function(e){e.createdTime=e.created_time||e.createdTime,delete e.created_time;var o=new a.PostModel(e);return console.log(t.posts.length,":setPosts:::-----------------------------------------------------NEW postModel->",o),t.posts.push(o),o});return o.length>0},Posts.prototype.onGetPostsClick=function(){var t=this,e=new Array;this.postParams=new a.PostParams,this.getPosts(this.postParams,e).subscribe(function(e){console.log("posts success::::::::::::::::::::::::::::::::::::::::::::::::::::",e),t.setPosts(t.fbCollection,e.data)},function(t){console.log("posts err:::",t)},function(){console.log("posts final:::")})},Posts.prototype.getPosts=function(t,e){var o=this;if(console.log("getEvents....called with postParams:",t),this.message="In progress...",!this.isValidDateRange(this.fromDate,this.toDate))return console.log("Invalid Date range!!!!"),void(this.message="Invalid Date range......");console.log("is valid date range",this.fromDate+" : to : "+this.toDate);var n=d(this.fromDate,p.ENV.DATE_TIME_FORMAT).unix(),s=d(this.toDate,p.ENV.DATE_TIME_FORMAT).unix(),r=p.ENV.FB_GRAPH_URL+p.ENV.FB_PROFILE_ID+"/posts",l=new i.URLSearchParams;return l.append("access_token",this.accessToken),l.append("since",n.toString()),l.append("until",s.toString()),l.append("fields",t.fields),l.append("limit",t.limit),l.append("pretty",t.pretty),""!==t.after&&(console.log("after is present...ADDING after"),l.append("after",t.after)),r=r+"?"+l.toString(),console.log("url->",r),this.apiService.fetch(r).subscribe(function(t){if(console.log("getEvents RESPONSE ->",t),t.data&&t.data.length>0){var n=new c.PagingData(t.paging);if(t.data.filter(function(t){e.push(t)}),""!==n.cursors.after)return console.log("pagingData.cursor.after PRESENT"),o.postParams.after=n.cursors.after,o.getPosts(o.postParams,e);o.postParams.after="",console.log("---------------------------------------------------- NOT PRESENT--------ALL DONE!!"),o.dialogSubject.next({data:e})}else o.message="Complete!",console.log("-------------------------------------------ALL DONE!!"),o.dialogSubject.next({data:e})},function(t){o.message=JSON.stringify(t)}),this.dialogSubject},Posts.prototype.onSubmitPosts=function(){console.log("SUBMIT onSubmitEvents1...",this.fbCollection),this.submitPosts(this.fbCollection)},Posts.prototype.submitPosts=function(t){var e=this;console.log("SUBMIT postCollection...",t);var o=p.ENV.HOST_API_URL+"/posts_post.php";this.apiService.post(o,t).subscribe(function(t){console.log("postModel POST response recieved....",t),t&&t.success&&(e.fbCollection=new a.PostCollection,e.getPostsFromTable())})},Posts.prototype.addPostModel=function(t){var e=new a.PostCollection;e.posts.push(t),console.log("SUBMIT addEventModel...",e),this.submitPosts(e)},Posts.prototype.onDeletePosts=function(t){var e=this,o=p.ENV.HOST_API_URL+"/posts_delete.php";console.log("DELETE postModel...",t),this.apiService.post(o,t).subscribe(function(t){console.log("postModel DELETE:POST response recieved....",t),t&&t.success?console.log("Deleted successfully...."):console.log("Delete UNSUCCESSFUL"),e.getPostsFromTable()})},Posts.prototype.onUpdatePosts=function(t){p.ENV.HOST_API_URL+"/posts_update.php";console.log("UPDATE postModel...",t)},Posts.prototype.getPostsFromTable=function(){var t=this;console.log("getPostsFromTable...");var e=p.ENV.HOST_API_URL+"/posts_get.php";return this.postCollection.posts=new Array,this.apiService.fetch(e).subscribe(function(e){console.log("getPostsFromTable response ->",e);t.setPosts(t.postCollection,e.posts);t.setLastEndTime()},function(e){console.log("getPostsFromTable ERR ->",e),t.message=JSON.stringify(e)})},Posts.prototype.setLastEndTime=function(){var t=this.postCollection.posts.length;if(console.log("setLastEndTime",t),t>0){var e=this.postCollection.posts[0];this.fromDate=e.createdTime}},Posts.prototype.isValidDateRange=function(t,e){return!!(d(this.fromDate,p.ENV.DATE_TIME_FORMAT).isValid()&&d(this.toDate,p.ENV.DATE_TIME_FORMAT).isValid()&&d(this.fromDate,p.ENV.DATE_TIME_FORMAT).isBefore(d(this.toDate,p.ENV.DATE_TIME_FORMAT)))&&(console.log("IS VALID DATE RANGE:",this.fromDate+" : to : "+this.toDate),!0)},Posts}();h=n([r.Component({selector:"app-posts",template:o(504),providers:[l.ApiService]}),s("design:paramtypes",[l.ApiService])],h),e.Posts=h},503:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(89),s=o(83),r=function(){function PostParams(){this.fields="id,full_picture,description,name,created_time",this.limit="10",this.pretty="0",this.before="",this.after=""}return PostParams}();e.PostParams=r;var i=function(){function PostModel(t){this.name=t.name,this.id=t.id,this.uid=t.uid,this.description=t.description||"",this.fullPicture=t.full_picture||"",this.createdTime=n(t.createdTime||"").format(s.ENV.DATE_TIME_FORMAT)}return PostModel}();e.PostModel=i;var l=function(){function PostCollection(){this.posts=new Array}return PostCollection}();e.PostCollection=l},504:function(t,e){t.exports='<section class="container">\r\n\t<div class="row">\r\n        <form class="form-horizontal">\r\n            <div class="form-group">\r\n               <label class="col-sm-2 control-label">Access token</label>\r\n                <div class="col-sm-10">\r\n                    <input type="text" class="form-control" id="accessToken" [(ngModel)]="accessToken" name="accessToken">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n               <label class="col-sm-2 control-label">From</label>\r\n                <div class="col-sm-2">\r\n                    <input type="text" class="form-control" id="fromDate" [(ngModel)]="fromDate" name="fromDate">\r\n                </div>\r\n                <label class="col-sm-1 control-label">To</label>\r\n                <div class="col-sm-2">\r\n                    <input type="text" class="form-control" id="toDate" [(ngModel)]="toDate" name="toDate">\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <div class="col-sm-12">\r\n                    <input type="button" class="btn btn-xs btn-success" value="Get Posts from Facebook" (click)="onGetPostsClick()">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Add Posts to DB" (click)="onSubmitPosts()">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Get Posts from DB" (click)="getPostsFromTable()">\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n\t<div class="row">\r\n        <h2 class="text-danger">{{message}}</h2>\r\n    </div>\r\n\r\n    <div class="row">\r\n        <h4 class="text-danger">Events from Facebook</h4>\r\n    </div>\r\n    <div class="row">\r\n        <table class="table table-responsive table-striped">\r\n            <thead>\r\n            <tr>\r\n                <th class="col-sm-2">Created Time </th>\r\n                <th>Name</th>\r\n                <th class="col-sm-2">URL : {{fbCollection.posts.length}}</th>\r\n                <th class="col-sm-2">Actions</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody >\r\n            <tr *ngFor="let postModel of fbCollection.posts;">\r\n                <td>{{postModel.createdTime}}</td>\r\n                <td>\r\n                    {{postModel.name}}\r\n                    <div>\r\n                    {{postModel.description}}\r\n                    </div>\r\n                </td>\r\n                <td><img class="img img-responsive" src="{{postModel.fullPicture}}"></td>\r\n                <td class="text-center">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Add" (click)="addPostModel(postModel)">\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n\t<div class="row">\r\n\t\t<table class="table table-responsive table-striped">\r\n            <thead>\r\n                <tr>\r\n                    <th class="col-sm-1">#Id</th>\r\n                    <th>Desc</th>\r\n                    <th class="col-sm-2">Time</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody >\r\n                <tr *ngFor="let postModel of postCollection.posts; let myIndex = index">\r\n                    <td>\r\n                        <img class="img img-responsive" src="{{postModel.fullPicture}}">\r\n                    </td>\r\n                    <td>{{postModel.name}}</td>\r\n                    <td>{{postModel.createdTime}}</td>\r\n                </tr>\r\n            </tbody>\r\n\t\t</table>\r\n\t</div>\r\n\r\n</section>\r\n'},505:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(41),l=o(63),a=o(81),c=o(500),d=o(210),u=o(89),p=o(211),h=o(83),f=function(){function Photos(t,e){this.apiService=t,this.router=e,this.message="",this.albumName="NOT KNOWN",this.albumsCollection=new c.AlbumCollection,this.fromDate="NONE",this.accessToken="",this.toDate=u().format(h.ENV.DATE_TIME_FORMAT),this.dialogSubject=new p.Subject,this.imageHostPath=h.ENV.HOST_API_URL,
console.log("Photos component init")}return Photos.prototype.ngOnInit=function(){var t=this;console.log("ngOnInit::");this.router.params.forEach(function(e){console.log("ngOnInit::",e.albumId),t.albumId=e.albumId}),this.albumsCollection.albums.forEach(function(e){e.id===t.albumId&&(t.albumName=e.name)}),this.photoCollection=new c.PhotoCollection(this.albumId),this.fbCollection=new c.PhotoCollection(this.albumId),this.getPhotosFromTable(this.albumId)},Photos.prototype.setPhotos=function(t,e){console.log("setPhotos:::-------------------------------------------------------------------------------------");var o=e.map(function(e){e.created_time&&(e.createdTime=e.created_time,delete e.created_time);var o=new c.PhotoModel(e);return console.log(t.length,":setPhotos:::------------------NEW photoModel->",o),t.push(o),o});return o.length>0},Photos.prototype.onGetPhotosClick=function(){var t=this;this.fbCollection=new c.PhotoCollection(this.albumId);var e=new Array;this.photoParams=new c.PhotoParams(this.albumId),this.dialogSubject=new p.Subject,console.log("onGetPhotosClick:::::::",e),this.getPhotos(this.photoParams,e,!1).subscribe(function(e){console.log("getPhotos success::::::::::::::::::::::::::::::::::::::::::::::::::::",e),t.setPhotos(t.fbCollection.photos,e.data)},function(t){console.log("getPhotos err:::",t)},function(){console.log("getPhotos final:::")})},Photos.prototype.getPhotosFromTable=function(t){var e=this;console.log("getEventsFromTable...");var o=h.ENV.HOST_API_URL+"/photos_get.php?albumId="+t;return this.photoCollection.photos=new Array,this.apiService.fetch(o).subscribe(function(t){console.log("getPhotosFromTable response ->",t),e.setPhotos(e.photoCollection.photos,t.photos),e.setLastEndTime()},function(t){console.log("getPhotosFromTable ERR ->",t),e.message=JSON.stringify(t)})},Photos.prototype.onDeletePhotoModel=function(t){var e=this,o=h.ENV.HOST_API_URL+"/photos_delete.php";console.log("onDeletePhotoModel POST ->",t),this.apiService.post(o,t).subscribe(function(t){console.log("onDeletePhotoModel response ->",t),e.getPhotosFromTable(e.photoCollection.albumId)},function(t){console.log("onDeletePhotoModel ERR ->",t),e.message=JSON.stringify(t)})},Photos.prototype.onAddPhotoModel=function(t){var e=this.fbCollection.photos.indexOf(t);this.fbCollection.photos.splice(e,1);var o=this.fbCollection;o.photos=[t],this.submitPhotos(o)},Photos.prototype.onSubmitPhotos=function(){console.log("onSubmitPhotos"),this.submitPhotos(this.fbCollection)},Photos.prototype.submitPhotos=function(t){var e=this;console.log("SUBMIT PhotoCollection...",t);var o=h.ENV.HOST_API_URL+"/photos_post.php";this.apiService.post(o,t).subscribe(function(t){console.log("eventModel POST response recieved....",t),t&&t.success&&e.getPhotosFromTable(e.albumId)})},Photos.prototype.getPhotos=function(t,e,o){var n=this;if(console.log("getPhotos....called with photoParams:",t,"COLLETION:::",e),this.message="In progress...",!this.isValidDateRange(this.fromDate,this.toDate))return console.log("Invalid Date range!!!!"),void(this.message="Invalid Date range......");console.log("is valid date range",this.fromDate+" : to : "+this.toDate);var s=u(this.fromDate,h.ENV.DATE_TIME_FORMAT).unix(),r=u(this.toDate,h.ENV.DATE_TIME_FORMAT).unix();console.log("is valid date range",s+" : to : "+r);var i=h.ENV.FB_GRAPH_URL+t.albumId+"/photos",a=new l.URLSearchParams;return a.append("access_token",this.accessToken),a.append("since",s.toString()),a.append("until",r.toString()),a.append("fields",t.fields),a.append("limit",t.limit),a.append("pretty",t.pretty),""!==t.after&&""!==t.nextUrl&&(console.log("after is present...ADDING after"),a.append("after",t.after)),i=i+"?"+a.toString(),console.log("url->",i),this.apiService.fetch(i).subscribe(function(t){console.log("getEvents RESPONSE ->",t);var o=t;if(o&&o.data.length>0){var s=o.data,r=new d.PagingData(o.paging);if(s.filter(function(t){e.push(t)}),"none"!==r.next)return console.log(e.length,":::pagingData.NEXT PRESENT"),n.photoParams.after=r.cursors.after,n.photoParams.nextUrl=r.next,n.getPhotos(n.photoParams,e,!0);n.photoParams.after="",n.photoParams.nextUrl="",console.log("---------------------------------------------------- pagingData complete--------ALL DONE!!",e),n.dialogSubject.next({data:e})}else n.message="Complete!",console.log("-------------------------------------------ALL DONE!!",e),n.dialogSubject.next({data:e})},function(t){n.message=JSON.stringify(t)}),this.dialogSubject},Photos.prototype.setLastEndTime=function(){var t=this.photoCollection.photos.length;if(console.log("setLastEndTime",t),t>0){var e=this.photoCollection.photos[0];this.fromDate=e.createdTime}},Photos.prototype.isValidDateRange=function(t,e){return!!(u(this.fromDate,h.ENV.DATE_TIME_FORMAT).isValid()&&u(this.toDate,h.ENV.DATE_TIME_FORMAT).isValid()&&u(this.fromDate,h.ENV.DATE_TIME_FORMAT).isBefore(u(this.toDate,h.ENV.DATE_TIME_FORMAT)))&&(console.log("IS VALID DATE RANGE:",this.fromDate+" : to : "+this.toDate),!0)},Photos}();f=n([r.Component({selector:"app-photos",template:o(506),providers:[a.ApiService]}),s("design:paramtypes",[a.ApiService,i.ActivatedRoute])],f),e.Photos=f},506:function(t,e){t.exports='<section class="container">\r\n    <div class="row">\r\n        <form class="form-horizontal">\r\n        <h3>{{albumName}}</h3>\r\n            \r\n            <div class="form-group">\r\n               <label class="col-sm-2 control-label">Access token</label>\r\n                <div class="col-sm-10">\r\n                    <input type="text" class="form-control" id="accessToken" [(ngModel)]="accessToken" name="accessToken">\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n               <label class="col-sm-2 control-label">From</label>\r\n                <div class="col-sm-2">\r\n                    <input type="text" class="form-control" id="fromDate" [(ngModel)]="fromDate" name="fromDate">\r\n                </div>\r\n                <label class="col-sm-1 control-label">To</label>\r\n                <div class="col-sm-2">\r\n                    <input type="text" class="form-control" id="toDate" [(ngModel)]="toDate" name="toDate">\r\n                </div>\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <div class="col-sm-12">\r\n                    <input type="button" class="btn btn-xs btn-success" value="Get Photos from Facebook" (click)="onGetPhotosClick()">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Add ALL Photos to DB" (click)="onSubmitPhotos()">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Get Photos from DB" (click)="getPhotosFromTable(\'178838325568799\')">\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <div class="row">\r\n        <h2 class="text-danger">{{message}}</h2>\r\n    </div>\r\n\r\n    <div class="row">\r\n        <h4 class="text-danger">Events from Facebook</h4>\r\n    </div>\r\n    <div class="row" *ngIf="fbCollection.photos">\r\n        Total: {{fbCollection.photos.length}}\r\n        <ul class="list-inline photo-container">\r\n            <li *ngFor="let photoModel of fbCollection.photos;">\r\n                <h4>#{{photoModel.id}}</h4>\r\n                <div class="btn-container">\r\n                    <input type="button" class="btn btn-xs btn-warning" value="Add" (click)="onAddPhotoModel(photoModel)">\r\n                </div>                 \r\n                <img class="img img-responsive" src="{{photoModel.source}}">\r\n                <div class="name">{{photoModel.name}}</div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n\r\n    <div class="row">\r\n        <h4 class="text-danger">Photos from Table</h4>\r\n    </div>\r\n    <div class="row" *ngIf="photoCollection.photos">\r\n        Total: {{photoCollection.photos.length}}\r\n        <ul class="list-inline photo-container">\r\n          <li *ngFor="let photoModel of photoCollection.photos;">\r\n            <h4>{{photoModel.uid}}</h4>\r\n            <div class="btn-container">\r\n                <input type="button" class="btn btn-xs btn-warning" value="Delete" (click)="onDeletePhotoModel(photoModel)">\r\n                <input type="button" class="btn btn-xs btn-warning" value="Update" (click)="onUpdatePhotoModel(photoModel)">\r\n            </div>\r\n            <img class="img img-responsive" src="{{imageHostPath}}{{photoModel.source}}">\r\n            <div class="name">{{photoModel.name}}</div>            \r\n          </li>\r\n        </ul>\r\n    </div>\r\n\r\n</section>\r\n'},507:function(t,e,o){"use strict";var n=this&&this.__decorate||function(t,e,o,n){var s,r=arguments.length,i=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var l=t.length-1;l>=0;l--)(s=t[l])&&(i=(r<3?s(i):r>3?s(e,o,i):s(e,o))||i);return r>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),i=o(38),l=o(41),a=function(){function AdminComponent(t,e,o){this.router=t,this.route=e,this.location=o,console.log("< AdminComponent > Component called...")}return AdminComponent.prototype.ngOnInit=function(){console.log("AdminComponent ::::"),this.router.queryParams.subscribe(function(t){console.log("ngOnInit::val------------------:",t),isNaN(t.id)||console.log("ngOnInit::val------------------:Valid param id",t)})},AdminComponent}();a=n([r.Component({selector:"admin-component",template:o(508),styles:[o(509)]}),s("design:paramtypes",[l.ActivatedRoute,l.Router,i.Location])],a),e.AdminComponent=a},508:function(t,e){t.exports="<router-outlet></router-outlet>"},509:74});
//# sourceMappingURL=admin.6ada7dd27f74950d0f7b.js.map